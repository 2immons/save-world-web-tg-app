"use strict";(self["webpackChunksave_world_web_tg_app"]=self["webpackChunksave_world_web_tg_app"]||[]).push([[599],{7197:function(t,s,a){a.d(s,{L:function(){return c}});var e=a(5234),i=a(4373),l=a(5903),o=a(2756),r=a(5628);const c=(0,e.nY)("tasks",{state:()=>({categories:[{cat_id:0,title:"Social",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{cat_id:1,title:"Social 2",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{cat_id:2,title:"Social 3",tasks:[{id:10,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:11,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:12,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"}]}],promoTasks:[{promo_task_id:0,title:"Recycle",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{promo_task_id:1,title:"Animals",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]}]}),actions:{async fetchTasks(){try{const t=(0,o.v)().getWebAppData,s=await i.A.post(`${l.$.backendURL}/api/cards/get-karma`,t);(0,r.B)(s),this.categories=s.data.data.tasks,this.promoTasks=s.data.data.promoTasks}catch(t){throw console.error("Ошибка при получении заданий:",t),new Error("Server error when getting tasks list")}},acceptTask(t){const s=this.categories.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));a&&(a.status="VERIFYING",setTimeout((()=>{a.status="COMPLETED"}),5e3))}},acceptPromoTask(t){const s=this.promoTasks.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));if(a){a.status="VERIFYING",s.promo_task_status="IN_PROGRESS",setTimeout((()=>{a.status="COMPLETED"}),5e3);let t=!0;s.tasks.forEach((s=>{"COMPLETED"===s.status||(t=!1)})),t&&(s.promo_task_status="COMPLETED")}}},claimPromoTaskReward(t){const s=this.promoTasks.find((s=>s.promo_task_id===t.promo_task_id));s&&(t.promo_task_status="CLAIMED")},claimReward(t){const s=this.categories.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));a&&(a.status="CLAIMED")}},async joinQuest(t){const s=await i.A.post(l.$.backendURL+"/orders/join-quest",{quest:t,withCredentials:!0});if(201!==s.status)throw new Error("Не удалось создать обращение. Неправильный статус ответа от сервера: "+s.status)}},getters:{}})},1241:function(t,s){s.A=(t,s)=>{const a=t.__vccOpts||t;for(const[e,i]of s)a[e]=i;return a}},3981:function(t,s,a){a.d(s,{A:function(){return b}});var e=a(6768),i=a(4232),l=a.p+"img/home.57a09072.svg",o=a.p+"img/tasks.0c2a5f02.svg",r=a.p+"img/mining.43e8cd0a.svg",c=a.p+"img/karma.0e9901cf.svg",n=a.p+"img/frens.48f51b71.svg",u=a(144),k=a(2225);const p={key:0},d={class:"container"},m={class:"footer-content"},v={key:0,src:l,alt:""},h={key:1,class:"active-nav-item"},_={key:0,src:o,alt:""},f={key:1,class:"active-nav-item"},T={key:0,src:r,alt:""},g={key:1,class:"active-nav-item"},E={key:0,src:c,alt:""},L={key:1,class:"active-nav-item"},C={key:0,src:n,alt:""},R={key:1,class:"active-nav-item"};var y=(0,e.pM)({__name:"TheFooter",setup(t){const s=(0,u.KR)(!0);return(0,e.sV)((()=>{k.B.on("toggleFooterVisibility",(t=>{s.value=t}))})),(0,e.hi)((()=>{k.B.off("toggleFooterVisibility")})),(t,a)=>{const u=(0,e.g2)("router-link");return s.value?((0,e.uX)(),(0,e.CE)("footer",p,[(0,e.Lk)("div",d,[(0,e.Lk)("nav",m,[(0,e.bF)(u,{to:"/",class:(0,i.C4)({"ac-nav-item":"/"===t.$route.path,"nav-item":"/"!==t.$route.path})},{default:(0,e.k6)((()=>["/"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",v)):(0,e.Q3)("",!0),"/"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",h,[a[0]||(a[0]=(0,e.Lk)("img",{src:l,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("home")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/tasks",class:(0,i.C4)({"ac-nav-item":"/tasks"===t.$route.path,"nav-item":"/tasks"!==t.$route.path})},{default:(0,e.k6)((()=>["/tasks"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",_)):(0,e.Q3)("",!0),"/tasks"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",f,[a[1]||(a[1]=(0,e.Lk)("img",{src:o,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("tasks")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/mining",class:(0,i.C4)({"ac-nav-item":"/mining"===t.$route.path,"nav-item":"/mining"!==t.$route.path})},{default:(0,e.k6)((()=>["/mining"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",T)):(0,e.Q3)("",!0),"/mining"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",g,[a[2]||(a[2]=(0,e.Lk)("img",{src:r,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("mining")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/karma",class:(0,i.C4)({"ac-nav-item":"/karma"===t.$route.path,"nav-item":"/karma"!==t.$route.path})},{default:(0,e.k6)((()=>["/karma"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",E)):(0,e.Q3)("",!0),"/karma"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",L,[a[3]||(a[3]=(0,e.Lk)("img",{src:c,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("karma")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/friends",class:(0,i.C4)({"ac-nav-item":"/friends"===t.$route.path,"nav-item":"/friends"!==t.$route.path})},{default:(0,e.k6)((()=>["/friends"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",C)):(0,e.Q3)("",!0),"/friends"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",R,[a[4]||(a[4]=(0,e.Lk)("img",{src:n,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("frens")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"])])])])):(0,e.Q3)("",!0)}}}),A=a(1241);const D=(0,A.A)(y,[["__scopeId","data-v-352a458a"]]);var b=D},880:function(t,s,a){a.d(s,{A:function(){return T}});var e=a(6768),i=a(144),l=a(4232),o=a.p+"img/back-btn.c27f779a.svg",r=a.p+"img/settings.3acc1d2e.svg",c=a(2225),n=a(2756),u=a(5931);const k={class:"container"},p={class:"header-content"},d={class:"user"},m={class:"user-wrapper"},v=["src"];var h={__name:"TheHeader",setup(t){const{t:s,locale:a}=(0,u.s9)(),h=(0,i.KR)(!1),_=(0,i.KR)(!1);let f=(0,i.Kh)({username:"No username",firstName:"No firstname",lastName:"No lastName",language:"en",avatar:""});(0,e.sV)((()=>{c.B.on("toggleHeaderBackBtnVisibility",(t=>{h.value=t})),c.B.on("disableSettingButton",(t=>{_.value=t}));const t=(0,n.v)().userData;t&&(f=t),a.value=f.language})),(0,e.hi)((()=>{c.B.off("toggleHeaderBackBtnVisibility"),c.B.off("toggleSettingsButton")}));const T=()=>{c.B.emit("headerBackBtnPressed")};return(t,s)=>{const a=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("header",null,[(0,e.Lk)("div",k,[(0,e.Lk)("div",p,[h.value?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"back-btn",onClick:T},s[0]||(s[0]=[(0,e.Lk)("img",{src:o,alt:""},null,-1)]))):(0,e.Q3)("",!0),(0,e.Lk)("div",d,[(0,e.Lk)("div",m,[(0,e.Lk)("img",{src:(0,i.R1)(f).avatar,alt:"Avatar"},null,8,v),(0,e.Lk)("p",null,(0,l.v_)((0,i.R1)(f).username),1)])]),_.value?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(a,{key:1,to:"/settings",class:"settings-wrapper"},{default:(0,e.k6)((()=>s[1]||(s[1]=[(0,e.Lk)("img",{src:r,alt:"Настройки"},null,-1)]))),_:1}))])])])}}},_=a(1241);const f=(0,_.A)(h,[["__scopeId","data-v-faeea4c8"]]);var T=f},9602:function(t,s,a){a.d(s,{A:function(){return T}});var e=a(6768),i=a(4232),l=a(144),o=a.p+"img/battery.e2012877.svg",r=a(4462),c=a(7197),n=a(5234),u=a(5931);const k={class:"task-item"},p={class:"left-side"},d={class:"info"},m={key:0,class:"loader-wrapper"},v={key:1,class:"claimed-wrapper"};var h=(0,e.pM)({__name:"TaskItem",props:{task:{},isPromoTask:{type:Boolean}},setup(t){const{t:s,locale:a}=(0,u.s9)(),h=(0,c.L)(),_=t,{categories:f}=(0,n.bP)(h),T=(0,e.EW)((()=>{const t=f.value.find((t=>t.tasks.some((t=>t.id===_.task.id)))),s=t?.tasks.find((t=>t.id===_.task.id));return s||_.task})),g=async()=>{try{window.open(T.value.url,"_blank"),h.acceptTask(T.value)}catch(t){return void console.error(t)}},E=async()=>{try{h.claimReward(T.value)}catch(t){return void console.error(t)}};return(t,a)=>((0,e.uX)(),(0,e.CE)("div",k,[(0,e.Lk)("div",p,[a[1]||(a[1]=(0,e.Lk)("img",{src:o,alt:""},null,-1)),(0,e.Lk)("div",d,[(0,e.Lk)("h3",null,(0,i.v_)(T.value.title),1),a[0]||(a[0]=(0,e.Lk)("div",{class:"income"},[(0,e.Lk)("p",null,"+ 699"),(0,e.Lk)("img",{src:r,alt:""})],-1))])]),"VERIFYING"===T.value.status?((0,e.uX)(),(0,e.CE)("div",m,a[2]||(a[2]=[(0,e.Lk)("div",{class:"loader"},null,-1)]))):(0,e.Q3)("",!0),"CLAIMED"===T.value.status?((0,e.uX)(),(0,e.CE)("div",v,[(0,e.Lk)("p",null,(0,i.v_)((0,l.R1)(s)("completed")),1)])):"NOT_STARTED"===T.value.status?((0,e.uX)(),(0,e.CE)("button",{key:2,onClick:g},(0,i.v_)((0,l.R1)(s)("accept-task")),1)):"COMPLETED"===T.value.status?((0,e.uX)(),(0,e.CE)("button",{key:3,onClick:E},(0,i.v_)((0,l.R1)(s)("claim-task")),1)):(0,e.Q3)("",!0)]))}}),_=a(1241);const f=(0,_.A)(h,[["__scopeId","data-v-46cf3497"]]);var T=f},4462:function(t,s,a){t.exports=a.p+"img/green-coin.5547f652.svg"}}]);
//# sourceMappingURL=599.10e6e2aa.js.map