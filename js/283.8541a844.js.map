{"version":3,"file":"js/283.8541a844.js","mappings":"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","sources":["webpack://save-world-web-tg-app/./src/store/tasks.ts","webpack://save-world-web-tg-app/./src/components/tasks/TaskItem.vue?d906","webpack://save-world-web-tg-app/./src/components/tasks/TaskItem.vue","webpack://save-world-web-tg-app/./src/components/tasks/TaskItem.vue?b010","webpack://save-world-web-tg-app/./src/components/tasks/PromoTaskSection.vue?fdb3","webpack://save-world-web-tg-app/./src/components/tasks/PromoTaskSection.vue","webpack://save-world-web-tg-app/./src/components/tasks/PromoTaskSection.vue?340b","webpack://save-world-web-tg-app/./src/views/PromoTaskView.vue?ef48","webpack://save-world-web-tg-app/./src/views/PromoTaskView.vue","webpack://save-world-web-tg-app/./src/views/PromoTaskView.vue?2011"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport axios from \"axios\";\nimport { config } from \"./utils/config\";\nimport { telegramStore } from \"@/store/telegram\";\nimport { checkResponseSuccess } from \"@/store/utils/apiUtils\";\n\ninterface Task {\n  id: number;\n  title: string;\n  url: string;\n  status: string;\n}\n\ninterface Category {\n  cat_id: number;\n  title: string;\n  tasks: Task[];\n}\n\ninterface PromoTask {\n  promo_task_id: number;\n  description: string;\n  title: string;\n  promo_task_status: string;\n  tasks: Task[];\n}\n\nexport const questsStore = defineStore(\"tasks\", {\n  state: () => ({\n    categories: [\n      {\n        cat_id: 0,\n        title: \"Social\",\n        tasks: [\n          {\n            id: 0,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"VERIFYING\",\n          },\n          {\n            id: 1,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"CLAIMED\",\n          },\n          {\n            id: 2,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"COMPLETED\",\n          },\n          {\n            id: 3,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n          {\n            id: 4,\n            title: \"Tasks 3\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n        ],\n      },\n      {\n        cat_id: 1,\n        title: \"Social 2\",\n        tasks: [\n          {\n            id: 5,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"VERIFYING\",\n          },\n          {\n            id: 6,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"CLAIMED\",\n          },\n          {\n            id: 7,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"COMPLETED\",\n          },\n          {\n            id: 8,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n          {\n            id: 9,\n            title: \"Tasks 3\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n        ],\n      },\n      {\n        cat_id: 2,\n        title: \"Social 3\",\n        tasks: [\n          {\n            id: 10,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"VERIFYING\",\n          },\n          {\n            id: 11,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"CLAIMED\",\n          },\n          {\n            id: 12,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"COMPLETED\",\n          },\n        ],\n      },\n    ] as Category[],\n\n    promoTasks: [\n      {\n        promo_task_id: 0,\n        title: \"Recycle\",\n        description: \"Recycle 5 batteries.\",\n        promo_task_status: \"NOT_STARTED\",\n        tasks: [\n          {\n            id: 0,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"VERIFYING\",\n          },\n          {\n            id: 1,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"CLAIMED\",\n          },\n          {\n            id: 2,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"COMPLETED\",\n          },\n          {\n            id: 3,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n          {\n            id: 4,\n            title: \"Tasks 3\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n        ],\n      },\n      {\n        promo_task_id: 1,\n        title: \"Animals\",\n        description: \"Recycle 5 batteries.\",\n        promo_task_status: \"NOT_STARTED\",\n        tasks: [\n          {\n            id: 5,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"VERIFYING\",\n          },\n          {\n            id: 6,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"CLAIMED\",\n          },\n          {\n            id: 7,\n            title: \"Task 1\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"COMPLETED\",\n          },\n          {\n            id: 8,\n            title: \"Tasks 2\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n          {\n            id: 9,\n            title: \"Tasks 3\",\n            url: \"https://vk.com/al_feed.php\",\n            status: \"NOT_STARTED\",\n          },\n        ],\n      },\n    ] as PromoTask[],\n  }),\n\n  actions: {\n    async fetchTasks() {\n      try {\n        const validationQuery = telegramStore().ensureValidationQuery();\n\n        const response = await axios.post(\n          `${config.backendURL}/api/cards/get-karma`,\n          validationQuery\n        );\n\n        checkResponseSuccess(response);\n\n        this.categories = response.data.data.tasks;\n        this.promoTasks = response.data.data.promoTasks;\n      } catch (error) {\n        console.error(\"Ошибка при получении заданий:\", error);\n        throw new Error(\"Server error when getting tasks list\");\n      }\n    },\n\n    acceptTask(task: any) {\n      const category = this.categories.find((cat) =>\n        cat.tasks.some((t) => t.id === task.id)\n      );\n      if (category) {\n        const taskToUpdate = category.tasks.find((t) => t.id === task.id);\n        if (taskToUpdate) {\n          taskToUpdate.status = \"VERIFYING\";\n\n          // TODO: заменить ниже на получение ответа от сервера\n          setTimeout(() => {\n            taskToUpdate.status = \"COMPLETED\";\n          }, 5000);\n        }\n      }\n    },\n\n    acceptPromoTask(task: any) {\n      const promoTask = this.promoTasks.find((pt) =>\n        pt.tasks.some((t) => t.id === task.id)\n      );\n      if (promoTask) {\n        const taskToUpdate = promoTask.tasks.find((t) => t.id === task.id);\n        if (taskToUpdate) {\n          taskToUpdate.status = \"VERIFYING\";\n          promoTask.promo_task_status = \"IN_PROGRESS\";\n\n          // TODO: заменить ниже на получение ответа от сервера\n          setTimeout(() => {\n            taskToUpdate.status = \"COMPLETED\";\n          }, 5000);\n\n          let isAllTasksCompleted = true;\n          promoTask.tasks.forEach((task) => {\n            if (task.status !== \"COMPLETED\") {\n              isAllTasksCompleted = false;\n              return;\n            }\n          });\n\n          if (isAllTasksCompleted) {\n            promoTask.promo_task_status = \"COMPLETED\";\n          }\n        }\n      }\n    },\n\n    claimPromoTaskReward(promoTask: PromoTask) {\n      const foundPromoTask = this.promoTasks.find(\n        (pt: PromoTask) => pt.promo_task_id === promoTask.promo_task_id\n      );\n\n      // TODO: вставить здесь запрос на сервер\n\n      if (foundPromoTask) {\n        promoTask.promo_task_status = \"CLAIMED\";\n      }\n    },\n\n    claimReward(task: any) {\n      const category = this.categories.find((cat) =>\n        cat.tasks.some((t) => t.id === task.id)\n      );\n      if (category) {\n        const taskToUpdate = category.tasks.find((t) => t.id === task.id);\n        if (taskToUpdate) {\n          taskToUpdate.status = \"CLAIMED\";\n        }\n      }\n    },\n\n    async joinQuest(quest: any) {\n      const response = await axios.post(\n        config.backendURL + \"/orders/join-quest\",\n        {\n          quest,\n          withCredentials: true,\n        }\n      );\n\n      if (response.status !== 201) {\n        throw new Error(\n          \"Не удалось создать обращение. Неправильный статус ответа от сервера: \" +\n            response.status\n        );\n      }\n    },\n  },\n\n  getters: {},\n});\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref } from \"vue\"\nimport _imports_0 from '../../assets/svg/tasks/battery.svg'\nimport _imports_1 from '../../assets/svg/stats/green-coin.svg'\n\n\nconst _hoisted_1 = { class: \"task-item\" }\nconst _hoisted_2 = { class: \"left-side\" }\nconst _hoisted_3 = { class: \"info\" }\nconst _hoisted_4 = {\n  key: 0,\n  class: \"loader-wrapper\"\n}\nconst _hoisted_5 = {\n  key: 1,\n  class: \"claimed-wrapper\"\n}\n\nimport { computed } from \"vue\";\nimport { questsStore } from \"@/store/tasks\";\nimport { storeToRefs } from \"pinia\";\nimport { useI18n } from \"vue-i18n\";\ninterface Task {\n  id: number;\n  title: string;\n  url: string;\n  status: string; // VERIFYING, NOT_STARTED, COMPLETED, CLAIMED\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TaskItem',\n  props: {\n    task: {},\n    isPromoTask: { type: Boolean }\n  },\n  setup(__props: any) {\n\nconst { t, locale } = useI18n();\n\nconst tasksStoreInstance = questsStore();\n\nconst props = __props;\n\nconst { categories } = storeToRefs(tasksStoreInstance);\n\nconst task = computed((): Task => {\n  const category = categories.value.find((currentCategory) =>\n    currentCategory.tasks.some(\n      (currentTask) => currentTask.id === props.task.id\n    )\n  );\n  const foundTask = category?.tasks.find(\n    (currentTask) => currentTask.id === props.task.id\n  );\n  return foundTask || props.task;\n});\n\nconst acceptPromoTask = async () => {\n  try {\n    window.open(task.value.url, \"_blank\");\n    tasksStoreInstance.acceptPromoTask(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n\nconst acceptTask = async () => {\n  try {\n    window.open(task.value.url, \"_blank\");\n    tasksStoreInstance.acceptTask(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n\nconst claimReward = async () => {\n  try {\n    tasksStoreInstance.claimReward(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _cache[1] || (_cache[1] = _createElementVNode(\"img\", {\n        src: _imports_0,\n        alt: \"\"\n      }, null, -1)),\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"h3\", null, _toDisplayString(task.value.title), 1),\n        _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"income\" }, [\n          _createElementVNode(\"p\", null, \"+ 699\"),\n          _createElementVNode(\"img\", {\n            src: _imports_1,\n            alt: \"\"\n          })\n        ], -1))\n      ])\n    ]),\n    (task.value.status === 'VERIFYING')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _cache[2] || (_cache[2] = [\n          _createElementVNode(\"div\", { class: \"loader\" }, null, -1)\n        ])))\n      : _createCommentVNode(\"\", true),\n    (task.value.status === 'CLAIMED')\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n          _createElementVNode(\"p\", null, _toDisplayString(_unref(t)(\"completed\")), 1)\n        ]))\n      : (task.value.status === 'NOT_STARTED')\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 2,\n            onClick: acceptTask\n          }, _toDisplayString(_unref(t)(\"accept-task\")), 1))\n        : (task.value.status === 'COMPLETED')\n          ? (_openBlock(), _createElementBlock(\"button\", {\n              key: 3,\n              onClick: claimReward\n            }, _toDisplayString(_unref(t)(\"claim-task\")), 1))\n          : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { computed, defineProps } from \"vue\";\nimport { questsStore } from \"@/store/tasks\";\nimport { storeToRefs } from \"pinia\";\nimport { useI18n } from \"vue-i18n\";\nconst { t, locale } = useI18n();\n\nconst tasksStoreInstance = questsStore();\n\nconst props = defineProps<{\n  task: Task;\n  isPromoTask: boolean;\n}>();\n\ninterface Task {\n  id: number;\n  title: string;\n  url: string;\n  status: string; // VERIFYING, NOT_STARTED, COMPLETED, CLAIMED\n}\n\nconst { categories } = storeToRefs(tasksStoreInstance);\n\nconst task = computed((): Task => {\n  const category = categories.value.find((currentCategory) =>\n    currentCategory.tasks.some(\n      (currentTask) => currentTask.id === props.task.id\n    )\n  );\n  const foundTask = category?.tasks.find(\n    (currentTask) => currentTask.id === props.task.id\n  );\n  return foundTask || props.task;\n});\n\nconst acceptPromoTask = async () => {\n  try {\n    window.open(task.value.url, \"_blank\");\n    tasksStoreInstance.acceptPromoTask(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n\nconst acceptTask = async () => {\n  try {\n    window.open(task.value.url, \"_blank\");\n    tasksStoreInstance.acceptTask(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n\nconst claimReward = async () => {\n  try {\n    tasksStoreInstance.claimReward(task.value);\n  } catch (error) {\n    console.error(error);\n    return;\n  }\n};\n</script>\n\n<template>\n  <div class=\"task-item\">\n    <div class=\"left-side\">\n      <img src=\"../../assets/svg/tasks/battery.svg\" alt=\"\" />\n      <div class=\"info\">\n        <h3>{{ task.title }}</h3>\n        <div class=\"income\">\n          <p>+ 699</p>\n          <img src=\"../../assets/svg/stats/green-coin.svg\" alt=\"\" />\n        </div>\n      </div>\n    </div>\n    <div class=\"loader-wrapper\" v-if=\"task.status === 'VERIFYING'\">\n      <div class=\"loader\"></div>\n    </div>\n    <div class=\"claimed-wrapper\" v-if=\"task.status === 'CLAIMED'\">\n      <p>{{ t(\"completed\") }}</p>\n    </div>\n    <button @click=\"acceptTask\" v-else-if=\"task.status === 'NOT_STARTED'\">\n      {{ t(\"accept-task\") }}\n    </button>\n    <button @click=\"claimReward\" v-else-if=\"task.status === 'COMPLETED'\">\n      {{ t(\"claim-task\") }}\n    </button>\n  </div>\n</template>\n\n<style scoped lang=\"sass\">\n@import \"../../styles/variables\"\n.task-item\n  padding: 20px 17px\n  display: flex\n  align-items: center\n  justify-content: space-between\n  width: 100%\n  height: fit-content\n  color: $c-light-text\n  background: #FFFFFF05\n  border: 1px solid $c-border-color\n  border-radius: 18px\n  gap: 15px\n\n  .left-side\n    display: flex\n    gap: 29px\n\n  .info\n    display: flex\n    flex-direction: column\n    gap: 12px\n\n  .income\n    display: flex\n    align-items: center\n    justify-content: center\n    gap: 3px\n    opacity: 60%\n\n    p\n      font-size: 12px\n      font-weight: 600\n      line-height: 16.39px\n      text-align: left\n      white-space: nowrap\n\n    img\n      height: 12px\n\n  h3\n    font-size: 14px\n    font-weight: 600\n    line-height: 19.12px\n    text-align: left\n\n  p\n    font-size: 18px\n    text-align: start\n    display: -webkit-box\n    -webkit-line-clamp: 4\n    -webkit-box-orient: vertical\n    overflow: hidden\n    text-overflow: ellipsis\n\n  button\n    display: flex\n    align-items: center\n    justify-content: center\n    padding: 0 14px\n    width: fit-content\n    background: #FFFFFF1A\n    border-radius: 50px\n    height: 25px\n    font-size: 10px\n    font-weight: 800\n    color: white\n    border: 1px solid $c-border-color\n    backdrop-filter: blur(2px)\n    gap: 3px\n\n.claimed-wrapper\n  height: 25px\n  display: flex\n  align-items: center\n  justify-content: center\n  padding: 0 14px\n  border-radius: 50px\n  border: 1px solid $c-border-color\n  backdrop-filter: blur(2px)\n  background: #FFFFFF1A\n\n  p\n    font-size: 10px\n    font-weight: 600\n    color: white\n\n.loader-wrapper\n  height: 25px\n  padding: 4px\n  background: #FFFFFF1A\n  border: 1px solid $c-border-color\n  border-radius: 50px\n  .loader\n    height: 100%\n    border: 3px solid #FFFFFF52\n    border-top: 3px solid #FFFFFFDE\n    border-radius: 50%\n    aspect-ratio: 1\n    animation: spin 1s linear infinite\n\n    @keyframes spin\n      from\n        transform: rotate(0deg)\n      to\n        transform: rotate(360deg)\n</style>\n","import script from \"./TaskItem.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TaskItem.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TaskItem.vue?vue&type=style&index=0&id=46cf3497&scoped=true&lang=sass\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-46cf3497\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"promo-task\" }\nconst _hoisted_2 = { class: \"container\" }\nconst _hoisted_3 = { class: \"promo-task-content\" }\nconst _hoisted_4 = { class: \"task-category__tasks\" }\n\nimport {\n  computed,\n  onMounted,\n  onBeforeUnmount,\n} from \"vue\";\nimport TaskItem from \"@/components/tasks/TaskItem.vue\";\nimport { storeToRefs } from \"pinia\";\nimport { questsStore } from \"@/store/tasks\";\nimport { eventBus } from \"@/event_bus/eventBus\";\nimport router from \"@/router\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PromoTaskSection',\n  props: {\n    promoTaskID: {}\n  },\n  emits: [\"clicked\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst tasksStoreInstance = questsStore();\nconst { promoTasks } = storeToRefs(tasksStoreInstance);\n\nconst promoTask = promoTasks.value.find(\n  (currentPromoTask) =>\n    currentPromoTask.promo_task_id === Number(props.promoTaskID)\n);\n\nconst emit = __emit;\n\nonMounted(() => {\n  eventBus.emit(\"toggleHeaderBackBtnVisibility\", true);\n  eventBus.on(\"headerBackBtnPressed\", () => {\n    router.back();\n  });\n});\n\nonBeforeUnmount(() => {\n  eventBus.emit(\"toggleHeaderBackBtnVisibility\", false);\n  eventBus.off(\"headerBackBtnPressed\");\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"h2\", null, _toDisplayString(_ctx.t(\"promo-tasks\")), 1),\n        _createElementVNode(\"div\", _hoisted_4, [\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(promoTask).tasks, (task, index) => {\n            return (_openBlock(), _createBlock(TaskItem, {\n              class: \"task-category__task\",\n              key: index,\n              task: task,\n              isPromoTask: true\n            }, null, 8, [\"task\"]))\n          }), 128))\n        ])\n      ])\n    ])\n  ]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport {\n  defineProps,\n  defineEmits,\n  computed,\n  onMounted,\n  onBeforeUnmount,\n} from \"vue\";\nimport TaskItem from \"@/components/tasks/TaskItem.vue\";\nimport { storeToRefs } from \"pinia\";\nimport { questsStore } from \"@/store/tasks\";\nimport { eventBus } from \"@/event_bus/eventBus\";\nimport router from \"@/router\";\n\nconst props = defineProps<{\n  promoTaskID: number;\n}>();\n\nconst tasksStoreInstance = questsStore();\nconst { promoTasks } = storeToRefs(tasksStoreInstance);\n\nconst promoTask = promoTasks.value.find(\n  (currentPromoTask) =>\n    currentPromoTask.promo_task_id === Number(props.promoTaskID)\n);\n\nconst emit = defineEmits([\"clicked\"]);\n\nonMounted(() => {\n  eventBus.emit(\"toggleHeaderBackBtnVisibility\", true);\n  eventBus.on(\"headerBackBtnPressed\", () => {\n    router.back();\n  });\n});\n\nonBeforeUnmount(() => {\n  eventBus.emit(\"toggleHeaderBackBtnVisibility\", false);\n  eventBus.off(\"headerBackBtnPressed\");\n});\n</script>\n\n<template>\n  <section class=\"promo-task\">\n    <div class=\"container\">\n      <div class=\"promo-task-content\">\n        <h2>\n          {{ t(\"promo-tasks\") }}\n        </h2>\n        <div class=\"task-category__tasks\">\n          <TaskItem\n            class=\"task-category__task\"\n            v-for=\"(task, index) in promoTask.tasks\"\n            :key=\"index\"\n            :task=\"task\"\n            :isPromoTask=\"true\"\n          />\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped lang=\"sass\">\n@import \"../../styles/variables\"\n.promo-task\n  display: flex\n  justify-content: center\n  margin: 46px 0 20px 0\n\n.promo-task-content\n  width: 100%\n  align-items: center\n  flex-direction: column\n  display: flex\n\n  h2, h3\n    display: flex\n    align-self: start\n    color: $c-light-text\n\n.task-category__tasks\n  height: fit-content\n  gap: 10px\n  border-radius: 12px\n  width: 100%\n  position: relative\n  display: flex\n  flex-direction: column\n  margin-top: 20px\n\n.task-category__task\n  display: flex\n</style>\n","import script from \"./PromoTaskSection.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PromoTaskSection.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PromoTaskSection.vue?vue&type=style&index=0&id=2c4ae955&scoped=true&lang=sass\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2c4ae955\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport PageHeader from \"@/components/layout/TheHeader.vue\";\nimport PageFooter from \"@/components/layout/TheFooter.vue\";\nimport PromoTaskSection from \"@/components/tasks/PromoTaskSection.vue\";\n\nimport { useRoute } from \"vue-router\";\nimport { onMounted, ref } from \"vue\";\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PromoTaskView',\n  setup(__props) {\n\nconst route = useRoute();\n\nconst promoTaskID = ref(route.params.promo_task_id);\n\nonMounted(() => {\n  console.log(route.params.promo_task_id);\n});\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(PageHeader),\n    _createElementVNode(\"main\", null, [\n      _createVNode(PromoTaskSection, { promoTaskID: promoTaskID.value }, null, 8, [\"promoTaskID\"])\n    ]),\n    _createVNode(PageFooter)\n  ], 64))\n}\n}\n\n})","<template>\n  <PageHeader />\n  <main>\n    <PromoTaskSection :promoTaskID=\"promoTaskID\" />\n  </main>\n  <PageFooter />\n</template>\n\n<script lang=\"ts\" setup>\nimport PageHeader from \"@/components/layout/TheHeader.vue\";\nimport PageFooter from \"@/components/layout/TheFooter.vue\";\nimport PromoTaskSection from \"@/components/tasks/PromoTaskSection.vue\";\n\nimport { useRoute } from \"vue-router\";\nimport { onMounted, ref } from \"vue\";\n\nconst route = useRoute();\n\nconst promoTaskID = ref(route.params.promo_task_id);\n\nonMounted(() => {\n  console.log(route.params.promo_task_id);\n});\n</script>\n\n<style lang=\"sass\">\nmain\n  flex: 1\n  margin-bottom: 120px\n</style>\n","import script from \"./PromoTaskView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PromoTaskView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./PromoTaskView.vue?vue&type=style&index=0&id=039dbdd8&lang=sass\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["questsStore","defineStore","state","categories","cat_id","title","tasks","id","url","status","promoTasks","promo_task_id","description","promo_task_status","actions","fetchTasks","validationQuery","telegramStore","ensureValidationQuery","response","axios","post","config","backendURL","checkResponseSuccess","this","data","error","console","Error","acceptTask","task","category","find","cat","some","t","taskToUpdate","setTimeout","acceptPromoTask","promoTask","pt","isAllTasksCompleted","forEach","claimPromoTaskReward","foundPromoTask","claimReward","joinQuest","quest","withCredentials","getters","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","key","_hoisted_5","_defineComponent","__name","props","isPromoTask","type","Boolean","setup","__props","locale","useI18n","tasksStoreInstance","storeToRefs","computed","value","currentCategory","currentTask","foundTask","async","window","open","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","src","_imports_0","alt","_toDisplayString","_imports_1","_createCommentVNode","_unref","onClick","__exports__","promoTaskID","emits","emit","__emit","currentPromoTask","Number","onMounted","eventBus","on","router","back","onBeforeUnmount","off","_Fragment","_renderList","index","_createBlock","TaskItem","route","useRoute","ref","params","log","_createVNode","PageHeader","PromoTaskSection","PageFooter"],"sourceRoot":""}