"use strict";(self["webpackChunksave_world_web_tg_app"]=self["webpackChunksave_world_web_tg_app"]||[]).push([[49],{5548:function(t,s,a){a.d(s,{L:function(){return i}});var e=a(5234),o=a(4373),l=a(3957);const i=(0,e.nY)("quests",{state:()=>({categories:[{cat_id:0,title:"Social",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{cat_id:1,title:"Social 2",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]}],promoTasks:[{promo_task_id:0,title:"Recycle",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{promo_task_id:1,title:"Animals",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]}]}),actions:{fetchQuests(){return this.promoTasks},acceptTask(t){const s=this.categories.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));a&&(a.status="VERIFYING",setTimeout((()=>{a.status="COMPLETED"}),5e3))}},acceptPromoTask(t){const s=this.promoTasks.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));if(a){a.status="VERIFYING",s.promo_task_status="IN_PROGRESS",setTimeout((()=>{a.status="COMPLETED"}),5e3);let t=!0;s.tasks.forEach((s=>{"COMPLETED"===s.status||(t=!1)})),t&&(s.promo_task_status="COMPLETED")}}},claimPromoTaskReward(t){const s=this.promoTasks.find((s=>s.promo_task_id===t.promo_task_id));s&&(t.promo_task_status="CLAIMED")},claimReward(t){const s=this.categories.find((s=>s.tasks.some((s=>s.id===t.id))));if(s){const a=s.tasks.find((s=>s.id===t.id));a&&(a.status="CLAIMED")}},async joinQuest(t){const s=await o.A.post(l.$.backendURL+"/orders/join-quest",{quest:t,withCredentials:!0});if(201!==s.status)throw new Error("Не удалось создать обращение. Неправильный статус ответа от сервера: "+s.status)}},getters:{}})},513:function(t,s,a){a.d(s,{A:function(){return f}});var e=a(6768),o=a(4232),l=a(144),i=a.p+"img/battery.e2012877.svg",r=a(4462),c=a(5548),u=a(5234),k=a(5931);const p={class:"task-item"},n={class:"left-side"},d={class:"info"},v={key:0,class:"loader-wrapper"},_={key:1,class:"claimed-wrapper"};var m=(0,e.pM)({__name:"TaskItem",props:{task:{},isPromoTask:{type:Boolean}},setup(t){const{t:s,locale:a}=(0,k.s9)(),m=(0,c.L)(),T=t,{categories:E}=(0,u.bP)(m),f=(0,e.EW)((()=>{const t=E.value.find((t=>t.tasks.some((t=>t.id===T.task.id)))),s=t?.tasks.find((t=>t.id===T.task.id));return s||T.task})),h=async()=>{try{window.open(f.value.url,"_blank"),m.acceptTask(f.value)}catch(t){return void console.error(t)}},L=async()=>{try{m.claimReward(f.value)}catch(t){return void console.error(t)}};return(t,a)=>((0,e.uX)(),(0,e.CE)("div",p,[(0,e.Lk)("div",n,[a[1]||(a[1]=(0,e.Lk)("img",{src:i,alt:""},null,-1)),(0,e.Lk)("div",d,[(0,e.Lk)("h3",null,(0,o.v_)(f.value.title),1),a[0]||(a[0]=(0,e.Lk)("div",{class:"income"},[(0,e.Lk)("p",null,"+ 699"),(0,e.Lk)("img",{src:r,alt:""})],-1))])]),"VERIFYING"===f.value.status?((0,e.uX)(),(0,e.CE)("div",v,a[2]||(a[2]=[(0,e.Lk)("div",{class:"loader"},null,-1)]))):(0,e.Q3)("",!0),"CLAIMED"===f.value.status?((0,e.uX)(),(0,e.CE)("div",_,[(0,e.Lk)("p",null,(0,o.v_)((0,l.R1)(s)("completed")),1)])):"NOT_STARTED"===f.value.status?((0,e.uX)(),(0,e.CE)("button",{key:2,onClick:h},(0,o.v_)((0,l.R1)(s)("accept-task")),1)):"COMPLETED"===f.value.status?((0,e.uX)(),(0,e.CE)("button",{key:3,onClick:L},(0,o.v_)((0,l.R1)(s)("claim-task")),1)):(0,e.Q3)("",!0)]))}}),T=a(1241);const E=(0,T.A)(m,[["__scopeId","data-v-f7ecd02c"]]);var f=E},1418:function(t,s,a){a.r(s),a.d(s,{default:function(){return Y}});var e=a(6768),o=a(1628),l=a(238),i=a(4232),r=a(5548),c=a(144),u=a.p+"img/bg-vectores--promo-task.ee3e09b0.svg",k=a.p+"img/green-coin--small.1c407025.svg",p=a(5234);const n={class:"promo-task-wrapper"},d={class:"promo-task-box"},v={class:"title"},_={class:"name"},m={class:"footer"},T={key:2,class:"claimed-wrapper"};var E=(0,e.pM)({__name:"PromoTask",props:{promoTask:{}},setup(t){const s=(0,r.L)(),a=t,{promoTasks:o}=(0,p.bP)(s),l=(0,e.EW)((()=>{const t=o.value.find((t=>t.promo_task_id===a.promoTask.promo_task_id));return t||a.promoTask})),c=async()=>{},E=async()=>{try{s.claimPromoTaskReward(l.value)}catch(t){return void console.error(t)}};return(t,s)=>{const a=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("div",n,[(0,e.Lk)("div",d,[s[2]||(s[2]=(0,e.Lk)("img",{src:u,alt:"",class:"bg-image"},null,-1)),s[3]||(s[3]=(0,e.Lk)("div",{class:"bg-ellepsis"},null,-1)),(0,e.Lk)("p",v,(0,i.v_)(l.value.title),1),(0,e.Lk)("p",_,(0,i.v_)(l.value.description),1),(0,e.Lk)("div",m,["CLAIMED"!==l.value.promo_task_status&&"COMPLETED"!==l.value.promo_task_status?((0,e.uX)(),(0,e.Wv)(a,{key:0,to:{name:"promo-task",params:{promo_task_id:l.value.promo_task_id}}},{default:(0,e.k6)((()=>[(0,e.Lk)("button",{onClick:c},(0,i.v_)("IN_PROGRESS"===l.value.promo_task_status?t.t("continue-promo-task"):t.t("accept-task")),1)])),_:1},8,["to"])):"COMPLETED"===l.value.promo_task_status?((0,e.uX)(),(0,e.CE)("button",{key:1,onClick:E},(0,i.v_)(t.t("claim-task")),1)):"CLAIMED"===l.value.promo_task_status?((0,e.uX)(),(0,e.CE)("div",T,s[0]||(s[0]=[(0,e.Lk)("p",null,"Completed",-1)]))):(0,e.Q3)("",!0),s[1]||(s[1]=(0,e.Lk)("div",{class:"benefits"},[(0,e.Lk)("p",null,[(0,e.eW)(" + 699 "),(0,e.Lk)("img",{src:k,alt:""})])],-1))])])])}}}),f=a(1241);const h=(0,f.A)(E,[["__scopeId","data-v-6ff5eb7e"]]);var L=h,C=a(513);const y={key:0,class:"task-category__tasks"};var g=(0,e.pM)({__name:"TasksCategory",props:{activeCategory:{},category:{}},emits:["clicked"],setup(t,{emit:s}){const a=t;return(t,s)=>a.activeCategory===a.category.cat_id?((0,e.uX)(),(0,e.CE)("div",y,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(a.category.tasks,((t,s)=>((0,e.uX)(),(0,e.Wv)(C.A,{class:"task-category__task",key:s,task:t,isPromoTask:!1},null,8,["task"])))),128))])):(0,e.Q3)("",!0)}});const R=(0,f.A)(g,[["__scopeId","data-v-c807c592"]]);var I=R;const D={class:"quests"},A={class:"container"},b={class:"quests-content"},M={class:"promo-tasks no-scrollbar"},O={key:0},w={class:"regular-tasks"},X={class:"nav-wrapper"},P={class:"nav no-scrollbar"},N=["onClick"],S={key:0,class:"nav-overlay nav-overlay--left"},F={key:1,class:"nav-overlay nav-overlay--right"};var W=(0,e.pM)({__name:"TasksSection",setup(t){const s=(0,c.KR)(!0),a=(0,c.KR)(!1),o=t=>{const e=t.target;s.value=0===e.scrollLeft,a.value=e.scrollLeft+e.offsetWidth>=e.scrollWidth};(0,e.sV)((()=>{const t=document.querySelector(".nav");t&&t.addEventListener("scroll",o)}));const l=(0,c.KR)(10),u=((0,c.KR)(!0),(0,c.KR)(!1)),k=(0,r.L)(),p=(0,e.EW)((()=>k.promoTasks)),n=(0,e.EW)((()=>k.categories)),d=(0,c.KR)(0),v=t=>{d.value=t},_=t=>t===d.value?"category-title--active":"category-title";return(t,o)=>((0,e.uX)(),(0,e.CE)("section",D,[(0,e.Lk)("div",A,[(0,e.Lk)("div",b,[(0,e.Lk)("h2",null,[(0,e.eW)((0,i.v_)(t.t("tasks"))+" ",1),(0,e.Lk)("span",null,(0,i.v_)(l.value),1)]),(0,e.Lk)("div",M,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(p.value,((t,s)=>((0,e.uX)(),(0,e.Wv)(L,{key:s,promoTask:t},null,8,["promoTask"])))),128))]),u.value?((0,e.uX)(),(0,e.CE)("h3",O,(0,i.v_)(t.t("weekly")),1)):(0,e.Q3)("",!0),(0,e.Lk)("div",w,[(0,e.Lk)("div",X,[(0,e.Lk)("div",P,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.value,((t,s)=>((0,e.uX)(),(0,e.CE)("button",{key:s,class:(0,i.C4)(_(s)),onClick:t=>v(s)},(0,i.v_)(t.title),11,N)))),128))]),s.value?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",S)),a.value?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.CE)("div",F))]),((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(n.value,((t,s)=>((0,e.uX)(),(0,e.Wv)(I,{class:"tasks-nav",key:s,category:t,activeCategory:d.value},null,8,["category","activeCategory"])))),128))])])])]))}});const K=(0,f.A)(W,[["__scopeId","data-v-3bf2714a"]]);var G=K,Q=(0,e.pM)({__name:"TasksView",setup(t){return(t,s)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(o.A),(0,e.Lk)("main",null,[(0,e.bF)(G)]),(0,e.bF)(l.A)],64))}});const V=Q;var Y=V},4462:function(t,s,a){t.exports=a.p+"img/green-coin.5547f652.svg"}}]);
//# sourceMappingURL=49.d1ebe152.js.map