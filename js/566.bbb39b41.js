"use strict";(self["webpackChunksave_world_web_tg_app"]=self["webpackChunksave_world_web_tg_app"]||[]).push([[566],{8408:function(e,s,t){t.r(s),t.d(s,{default:function(){return pe}});var a=t(6768),l=t(3891),r=t(7843),n=t(4232),i=t(144),o=t(4462),c=t.p+"img/time.6a9b4e9f.svg",u=t(5234),v=t(4373),d=t(3957),p=t(5931),k=t(2756);function g(e){if(!e.data.success){const s=Array.isArray(e.data.responseErrors)?e.data.responseErrors.join("; "):e.data.responseErrors||"Причина не указана.";throw new Error("Запрос отработал с ошибкой. "+s)}}const h=(0,u.nY)("profile",{state:()=>({balance:4e4,newSpeed:.36,chatId:"",name:"",process:{state:"closed",remainingSeconds:122,totalProcessSeconds:28800,miningResult:300}}),actions:{setProfileVariables(e){const{locale:s}=(0,p.s9)(),t=e.process;this.process.state=t.state,"ACTIVE"===this.process.state&&(this.process.remainingSeconds=t.remainingSeconds),this.balance=e.balance,this.newSpeed=e.newSpeed,this.chatId=e.chatId,this.name=e.name,s.value=e.language||"en"},async getUserProfile(){try{const e=(0,k.v)().ensureValidationQuery(),s=await v.A.post(`${d.$.backendURL}/api/profile/myProfile`,e);g(s),this.setProfileVariables(s.data)}catch(e){throw console.error("Ошибка при получении профиля пользователя:",e),new Error("Server error when getting the user profile")}},async claimProcessReward(){try{const e=(0,k.v)().ensureValidationQuery(),s=await v.A.post(`${d.$.backendURL}/api/profile/myProfile`,e);g(s)}catch(e){throw console.error("Ошибка при получении награды за процесс:",e),new Error("Server error when claiming reward")}}},getters:{getBalance(e){return e.balance},getNewSpeed(e){return e.newSpeed.toFixed(2)},getRemainingSeconds(e){return e.process.remainingSeconds},getTotalProcessSeconds(e){return e.process.totalProcessSeconds},getProcessState(e){return e.process.state}}});var L=t(2225);const m={class:"stats-section"},_={class:"container"},w={class:"stats-content"},y={class:"stats-wrapper"},b={class:"stats__item stats__item--balance"},f={class:"amount"},S={class:"stats__item stats__item--mining-speed"},P={class:"amount"},E={class:"mining-progress-wrapper"},B={class:"mining-progress-bar"},R={class:"interface"},W={class:"time"},C={key:1,class:"progress"},A={class:"interface"},V={class:"time"};var X=(0,a.pM)({__name:"StatsSection",setup(e){const{t:s,locale:t}=(0,p.s9)(),l=h(),r=(0,a.EW)((()=>l.getNewSpeed)),u=(0,a.EW)((()=>l.getBalance)),v=(0,a.EW)((()=>l.getProcessState)),d=(0,a.EW)((()=>"active"===v.value?"claim-button--active":"claim-button")),k=(0,a.EW)((()=>l.getRemainingSeconds)),g=(0,a.EW)((()=>l.getTotalProcessSeconds)),X=(0,a.EW)((()=>String(k.value/g.value*100)+"%")),T=(0,i.KR)(Math.floor(k.value/60)),I=(0,i.KR)(k.value%60),Q=()=>{l.claimProcessReward()};return(0,a.sV)((async()=>{try{await l.getUserProfile()}catch(e){L.B.emit("showErrorPopup",e.message)}})),(e,t)=>((0,a.uX)(),(0,a.CE)("section",m,[(0,a.Lk)("div",_,[(0,a.Lk)("div",w,[(0,a.Lk)("div",y,[(0,a.Lk)("div",b,[(0,a.Lk)("p",null,(0,n.v_)((0,i.R1)(s)("your-balance")),1),(0,a.Lk)("div",f,[(0,a.eW)((0,n.v_)(u.value)+" ",1),t[0]||(t[0]=(0,a.Lk)("img",{src:o,alt:""},null,-1))])]),(0,a.Lk)("div",S,[(0,a.Lk)("p",null,(0,n.v_)((0,i.R1)(s)("mining-speed")),1),(0,a.Lk)("div",P,[(0,a.eW)(" + "+(0,n.v_)(r.value)+"/"+(0,n.v_)((0,i.R1)(s)("h"))+" ",1),t[1]||(t[1]=(0,a.Lk)("img",{src:o,alt:""},null,-1))])])]),(0,a.Lk)("div",E,[(0,a.Lk)("div",B,["active"===v.value?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"progress",style:(0,n.Tr)({width:X.value})},[(0,a.Lk)("div",R,[(0,a.Lk)("button",{onClick:Q},"Claim"),(0,a.Lk)("div",W,[t[2]||(t[2]=(0,a.Lk)("img",{src:c,alt:""},null,-1)),(0,a.Lk)("p",null,(0,n.v_)(T.value)+" "+(0,n.v_)((0,i.R1)(s)("h"))+" "+(0,n.v_)(I.value)+" "+(0,n.v_)((0,i.R1)(s)("m")),1)])])],4)):(0,a.Q3)("",!0),"closed"===v.value?((0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("div",A,[(0,a.Lk)("button",{onClick:Q,class:(0,n.C4)(d.value)},(0,n.v_)((0,i.R1)(s)("claim")),3),(0,a.Lk)("div",V,[t[3]||(t[3]=(0,a.Lk)("img",{src:c,alt:""},null,-1)),(0,a.Lk)("p",null,(0,n.v_)(T.value)+" "+(0,n.v_)((0,i.R1)(s)("h"))+" "+(0,n.v_)(I.value)+" "+(0,n.v_)((0,i.R1)(s)("m")),1)])])])):(0,a.Q3)("",!0)])])])])]))}}),T=t(1241);const I=(0,T.A)(X,[["__scopeId","data-v-4c5747e4"]]);var Q=I,$=t.p+"img/bg-earth-vectors.e11176ba.svg",K=t.p+"img/earth.9898a300.png";const M={class:"logo"};var U=(0,a.pM)({__name:"EarthSection",setup(e){const s=()=>{L.B.emit("toggleWorldStatictics",!0)};return(e,t)=>((0,a.uX)(),(0,a.CE)("section",M,[(0,a.Lk)("div",{class:"container"},[(0,a.Lk)("div",{class:"logo-wrapper",onClick:s},t[0]||(t[0]=[(0,a.Lk)("div",{class:"background"},[(0,a.Lk)("img",{src:$,alt:""})],-1),(0,a.Lk)("div",{class:"circle"},null,-1),(0,a.Lk)("img",{class:"earth",src:K,alt:""},null,-1)]))])]))}});const Y=(0,T.A)(U,[["__scopeId","data-v-fd3c2016"]]);var F=Y;const N=(0,u.nY)("world-population",{state:()=>({}),actions:{async getWorldPopulation(){try{const e=await v.A.get(`${d.$.worldPopulationURL}`);if(200!==e.status)throw new Error("Не удалось получить данные о населении "+e.status);return e.data}catch(e){throw console.error("Ошибка при запросе профиля пользователя:",e),e}}},getters:{}}),H={class:"world-population-section"},x={class:"container"},D={class:"world-population-content"},G={class:"stats-list"},j={class:"stats-item"},q={class:"title"},z={class:"stats-item"},J={class:"title"},O={class:"stats-item"},Z={class:"title"},ee={class:"stats-item"},se={class:"title"},te={class:"stats-item"},ae={class:"title"},le={class:"stats-item"},re={class:"title"},ne={class:"stats-item"},ie={class:"title"};var oe=(0,a.pM)({__name:"TheWorldPopulation",setup(e){const s=(0,i.KR)(""),t=N();return(0,a.sV)((async()=>{L.B.emit("toggleHeaderBackBtnVisibility",!0),s.value=await t.getWorldPopulation()})),(0,a.xo)((()=>{L.B.emit("toggleHeaderBackBtnVisibility",!1)})),(e,t)=>((0,a.uX)(),(0,a.CE)("section",H,[(0,a.Lk)("div",x,[(0,a.Lk)("div",D,[t[13]||(t[13]=(0,a.Lk)("h2",null,"World Population",-1)),(0,a.Lk)("div",G,[(0,a.Lk)("div",j,[(0,a.Lk)("p",q,(0,n.v_)(s.value.population),1),t[0]||(t[0]=(0,a.Lk)("p",{class:"hint"},"Current World Population",-1))]),t[7]||(t[7]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",z,[(0,a.Lk)("p",J,(0,n.v_)(s.value.birthsYear),1),t[1]||(t[1]=(0,a.Lk)("p",{class:"hint"},"Births this year",-1))]),t[8]||(t[8]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",O,[(0,a.Lk)("p",Z,(0,n.v_)(s.value.birthsToday),1),t[2]||(t[2]=(0,a.Lk)("p",{class:"hint"},"Births today",-1))]),t[9]||(t[9]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",ee,[(0,a.Lk)("p",se,(0,n.v_)(s.value.deathsYear),1),t[3]||(t[3]=(0,a.Lk)("p",{class:"hint"},"Deaths this year",-1))]),t[10]||(t[10]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",te,[(0,a.Lk)("p",ae,(0,n.v_)(s.value.deathsToday),1),t[4]||(t[4]=(0,a.Lk)("p",{class:"hint"},"Deaths today",-1))]),t[11]||(t[11]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",le,[(0,a.Lk)("p",re,(0,n.v_)(s.value.netPopulationGrowthYear),1),t[5]||(t[5]=(0,a.Lk)("p",{class:"hint"},"Net population growth this year",-1))]),t[12]||(t[12]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",ne,[(0,a.Lk)("p",ie,(0,n.v_)(s.value.netPopulationGrowthToday),1),t[6]||(t[6]=(0,a.Lk)("p",{class:"hint"},"Net population growth today",-1))])])])])]))}});const ce=(0,T.A)(oe,[["__scopeId","data-v-1328a55e"]]);var ue=ce,ve=(0,a.pM)({__name:"HomeView",setup(e){const s=(0,i.KR)(!1);return(0,a.sV)((()=>{L.B.on("toggleWorldStatictics",(e=>{s.value=e})),L.B.on("headerBackBtnPressed",(e=>{s.value=!1}))})),(0,a.hi)((()=>{L.B.off("toggleWorldStatictics"),L.B.off("headerBackBtnPressed")})),(e,t)=>((0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(l.A),(0,a.Lk)("main",null,[s.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(Q,{key:0})),s.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(F,{key:1})),s.value?((0,a.uX)(),(0,a.Wv)(ue,{key:2})):(0,a.Q3)("",!0)]),(0,a.bF)(r.A)],64))}});const de=ve;var pe=de}}]);
//# sourceMappingURL=566.bbb39b41.js.map