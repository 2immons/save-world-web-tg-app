"use strict";(self["webpackChunksave_world_web_tg_app"]=self["webpackChunksave_world_web_tg_app"]||[]).push([[667],{7197:function(t,a,s){s.d(a,{L:function(){return o}});var e=s(5234),i=s(4373),r=s(5903),l=s(2756),n=s(5628);const o=(0,e.nY)("tasks",{state:()=>({categories:[{cat_id:0,title:"Social",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{cat_id:1,title:"Social 2",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{cat_id:2,title:"Social 3",tasks:[{id:10,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:11,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:12,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"}]}],promoTasks:[{promo_task_id:0,title:"Recycle",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:0,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:1,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:2,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:3,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:4,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]},{promo_task_id:1,title:"Animals",description:"Recycle 5 batteries.",promo_task_status:"NOT_STARTED",tasks:[{id:5,title:"Task 1",url:"https://vk.com/al_feed.php",status:"VERIFYING"},{id:6,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"CLAIMED"},{id:7,title:"Task 1",url:"https://vk.com/al_feed.php",status:"COMPLETED"},{id:8,title:"Tasks 2",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"},{id:9,title:"Tasks 3",url:"https://vk.com/al_feed.php",status:"NOT_STARTED"}]}]}),actions:{async fetchTasks(){try{const t=(0,l.v)().getWebAppData,a=await i.A.post(`${r.$.backendURL}/api/cards/get-karma`,t);(0,n.B)(a),this.categories=a.data.data.tasks,this.promoTasks=a.data.data.promoTasks}catch(t){throw console.error("Ошибка при получении заданий:",t),new Error("Server error when getting tasks list")}},acceptTask(t){const a=this.categories.find((a=>a.tasks.some((a=>a.id===t.id))));if(a){const s=a.tasks.find((a=>a.id===t.id));s&&(s.status="VERIFYING",setTimeout((()=>{s.status="COMPLETED"}),5e3))}},acceptPromoTask(t){const a=this.promoTasks.find((a=>a.tasks.some((a=>a.id===t.id))));if(a){const s=a.tasks.find((a=>a.id===t.id));if(s){s.status="VERIFYING",a.promo_task_status="IN_PROGRESS",setTimeout((()=>{s.status="COMPLETED"}),5e3);let t=!0;a.tasks.forEach((a=>{"COMPLETED"===a.status||(t=!1)})),t&&(a.promo_task_status="COMPLETED")}}},claimPromoTaskReward(t){const a=this.promoTasks.find((a=>a.promo_task_id===t.promo_task_id));a&&(t.promo_task_status="CLAIMED")},claimReward(t){const a=this.categories.find((a=>a.tasks.some((a=>a.id===t.id))));if(a){const s=a.tasks.find((a=>a.id===t.id));s&&(s.status="CLAIMED")}},async joinQuest(t){const a=await i.A.post(r.$.backendURL+"/orders/join-quest",{quest:t,withCredentials:!0});if(201!==a.status)throw new Error("Не удалось создать обращение. Неправильный статус ответа от сервера: "+a.status)}},getters:{}})},1241:function(t,a){a.A=(t,a)=>{const s=t.__vccOpts||t;for(const[e,i]of a)s[e]=i;return s}},3981:function(t,a,s){s.d(a,{A:function(){return A}});var e=s(6768),i=s(4232),r=s.p+"img/home.57a09072.svg",l=s.p+"img/tasks.0c2a5f02.svg",n=s.p+"img/mining.43e8cd0a.svg",o=s.p+"img/karma.0e9901cf.svg",c=s.p+"img/frens.48f51b71.svg",u=s(144),d=s(2225);const p={key:0},k={class:"container"},v={class:"footer-content"},m={key:0,src:r,alt:""},f={key:1,class:"active-nav-item"},h={key:0,src:l,alt:""},_={key:1,class:"active-nav-item"},g={key:0,src:n,alt:""},T={key:1,class:"active-nav-item"},b={key:0,src:o,alt:""},E={key:1,class:"active-nav-item"},L={key:0,src:c,alt:""},C={key:1,class:"active-nav-item"};var R=(0,e.pM)({__name:"TheFooter",setup(t){const a=(0,u.KR)(!0);return(0,e.sV)((()=>{d.B.on("toggleFooterVisibility",(t=>{a.value=t}))})),(0,e.hi)((()=>{d.B.off("toggleFooterVisibility")})),(t,s)=>{const u=(0,e.g2)("router-link");return a.value?((0,e.uX)(),(0,e.CE)("footer",p,[(0,e.Lk)("div",k,[(0,e.Lk)("nav",v,[(0,e.bF)(u,{to:"/",class:(0,i.C4)({"ac-nav-item":"/"===t.$route.path,"nav-item":"/"!==t.$route.path})},{default:(0,e.k6)((()=>["/"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",m)):(0,e.Q3)("",!0),"/"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",f,[s[0]||(s[0]=(0,e.Lk)("img",{src:r,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("home")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/tasks",class:(0,i.C4)({"ac-nav-item":"/tasks"===t.$route.path,"nav-item":"/tasks"!==t.$route.path})},{default:(0,e.k6)((()=>["/tasks"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",h)):(0,e.Q3)("",!0),"/tasks"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",_,[s[1]||(s[1]=(0,e.Lk)("img",{src:l,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("tasks")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/mining",class:(0,i.C4)({"ac-nav-item":"/mining"===t.$route.path,"nav-item":"/mining"!==t.$route.path})},{default:(0,e.k6)((()=>["/mining"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",g)):(0,e.Q3)("",!0),"/mining"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",T,[s[2]||(s[2]=(0,e.Lk)("img",{src:n,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("mining")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/karma",class:(0,i.C4)({"ac-nav-item":"/karma"===t.$route.path,"nav-item":"/karma"!==t.$route.path})},{default:(0,e.k6)((()=>["/karma"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",b)):(0,e.Q3)("",!0),"/karma"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",E,[s[3]||(s[3]=(0,e.Lk)("img",{src:o,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("karma")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"]),(0,e.bF)(u,{to:"/friends",class:(0,i.C4)({"ac-nav-item":"/friends"===t.$route.path,"nav-item":"/friends"!==t.$route.path})},{default:(0,e.k6)((()=>["/friends"!==t.$route.path?((0,e.uX)(),(0,e.CE)("img",L)):(0,e.Q3)("",!0),"/friends"===t.$route.path?((0,e.uX)(),(0,e.CE)("div",C,[s[4]||(s[4]=(0,e.Lk)("img",{src:c,alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)(t.t("frens")),1)])):(0,e.Q3)("",!0)])),_:1},8,["class"])])])])):(0,e.Q3)("",!0)}}}),D=s(1241);const I=(0,D.A)(R,[["__scopeId","data-v-352a458a"]]);var A=I},1618:function(t,a,s){s.d(a,{A:function(){return _}});var e=s(6768),i=s(4232),r=s(144),l=s.p+"img/back-btn.c27f779a.svg",n=s.p+"img/settings.3acc1d2e.svg",o=s(2225),c=s(2756),u=s(5931);const d={class:"container"},p={class:"header-content"},k={class:"user"},v={class:"user-wrapper"};var m={__name:"TheHeader",setup(t){const{t:a,locale:s}=(0,u.s9)(),m=(0,r.KR)(!1),f=(0,r.KR)(!1);let h=(0,r.Kh)({username:"No username",firstName:"No firstname",lastName:"No lastName",language:"en"});(0,e.sV)((()=>{o.B.on("toggleHeaderBackBtnVisibility",(t=>{m.value=t})),o.B.on("disableSettingButton",(t=>{f.value=t}));const t=(0,c.v)().userData;t&&(h=t),s.value=h.language})),(0,e.hi)((()=>{o.B.off("toggleHeaderBackBtnVisibility"),o.B.off("toggleSettingsButton")}));const _=()=>{o.B.emit("headerBackBtnPressed")};return(t,a)=>{const s=(0,e.g2)("router-link");return(0,e.uX)(),(0,e.CE)("header",null,[(0,e.Lk)("div",d,[(0,e.Lk)("div",p,[m.value?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"back-btn",onClick:_},a[0]||(a[0]=[(0,e.Lk)("img",{src:l,alt:""},null,-1)]))):(0,e.Q3)("",!0),(0,e.Lk)("div",k,[(0,e.Lk)("div",v,[a[1]||(a[1]=(0,e.Lk)("img",{src:"#",alt:""},null,-1)),(0,e.Lk)("p",null,(0,i.v_)((0,r.R1)(h).username),1)])]),f.value?(0,e.Q3)("",!0):((0,e.uX)(),(0,e.Wv)(s,{key:1,to:"/settings",class:"settings-wrapper"},{default:(0,e.k6)((()=>a[2]||(a[2]=[(0,e.Lk)("img",{src:n,alt:"Настройки"},null,-1)]))),_:1}))])])])}}},f=s(1241);const h=(0,f.A)(m,[["__scopeId","data-v-82c29fce"]]);var _=h},5155:function(t,a,s){s.r(a),s.d(a,{default:function(){return Y}});var e=s(6768),i=s(1618),r=s(3981),l=s(4232),n=s(7197),o=s(144),c=s.p+"img/bg-vectors.ad2c577b.svg",u=s(4462);const d={class:"stats-wrapper"};var p=(0,e.pM)({__name:"FriendsStats",setup(t){(0,n.L)();return(t,a)=>((0,e.uX)(),(0,e.CE)("div",d,a[0]||(a[0]=[(0,e.Fv)('<div class="earned-coins-box" data-v-5c1cb3b2><img src="'+c+'" alt="" class="bg-image" data-v-5c1cb3b2><div class="bg-ellepsis" data-v-5c1cb3b2></div><p data-v-5c1cb3b2>You Earned:</p><div class="coins" data-v-5c1cb3b2><p data-v-5c1cb3b2>+ 6399 <img src="'+u+'" alt="" data-v-5c1cb3b2></p><button data-v-5c1cb3b2>Claim</button></div></div><div class="help" data-v-5c1cb3b2><p class="info" data-v-5c1cb3b2>?</p><p data-v-5c1cb3b2> Lorem ipsum dolor sit amet consectetur. Aliquam laoreet non pulvinar arcu pharetra cursus gravida nulla </p></div>',2)])))}}),k=s(1241);const v=(0,k.A)(p,[["__scopeId","data-v-5c1cb3b2"]]);var m=v,f=s(5234),h=s(4373),_=s(5903),g=s(2756),T=s(5628);const b=(0,f.nY)("friends",{state:()=>({referalData:null,friends:[{name:"Имя",boost:10,total:20},{name:"Имя",boost:10,total:20},{name:"Имя",boost:10,total:20},{name:"Имя",boost:10,total:20},{name:"Имя",boost:10,total:20}]}),actions:{async fetchFriends(){try{const t=(0,g.v)().getWebAppData,a=await h.A.post(`${_.$.backendURL}/api/cards/get-karma`,t);(0,T.B)(a),this.friends=a.data.data.friends}catch(t){throw console.error("Ошибка при получении друзей:",t),new Error("Server error when getting friends list")}},async ensureReferalData(){if(!this.referalData)try{this.referalData=await this.requestReferalData()}catch(t){throw console.error("Ошибка получения реферальных данных:",t),new Error("Error when getting referal data")}return this.referalData},async requestReferalData(){const t=(0,g.v)().getWebAppData,a=await h.A.post(`${_.$.backendURL}/api/request-invite-link`,t);return(0,T.B)(a),{referalLink:a.data.data.referalLink,preparedInlineMessageID:a.data.data.preparedInlineMessageID}}},getters:{}}),E={class:"friend"},L={class:"info"},C={class:"name"},R={class:"boost"},D={class:"total"};var I=(0,e.pM)({__name:"FriendItem",props:{friend:{}},setup(t){b();return(t,a)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",E,[a[2]||(a[2]=(0,e.Lk)("div",{class:"photo"},null,-1)),(0,e.Lk)("div",L,[(0,e.Lk)("p",C,(0,l.v_)(t.friend.name),1),(0,e.Lk)("p",R,[a[0]||(a[0]=(0,e.Lk)("img",{src:u,alt:""},null,-1)),(0,e.eW)(" + "+(0,l.v_)(t.friend.boost),1)])]),(0,e.Lk)("div",D,[(0,e.Lk)("p",null,[(0,e.eW)(" + "+(0,l.v_)(t.friend.total)+" ",1),a[1]||(a[1]=(0,e.Lk)("img",{src:u,alt:""},null,-1))])])]),a[3]||(a[3]=(0,e.Lk)("hr",null,null,-1))],64))}});const A=(0,k.A)(I,[["__scopeId","data-v-010502ff"]]);var w=A,y=s(2225);const F={class:"friends-list"},$={class:"list"};var M=(0,e.pM)({__name:"FriendsList",setup(t){const a=b(),s=(0,e.EW)((()=>a.friends)),i=(0,o.KR)({referalLink:"",preparedInlineMessageID:0}),r=async()=>{try{i.value=await a.ensureReferalData(),await navigator.clipboard.writeText(i.value.referalLink);const t=(0,g.v)();t.sendReferalLink(i.value.preparedInlineMessageID),t.showAlert("Ссылка: "+i.value.referalLink+" скопирована в буфер обмена!")}catch(t){y.B.emit("showErrorPopup",t.message)}};return(t,a)=>((0,e.uX)(),(0,e.CE)("div",F,[(0,e.Lk)("div",{class:"list-header"},[a[0]||(a[0]=(0,e.Lk)("p",null,"6 Friends",-1)),(0,e.Lk)("button",{onClick:r},"Invite +")]),(0,e.Lk)("div",$,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(s.value,((t,a)=>((0,e.uX)(),(0,e.Wv)(w,{key:a,friend:t},null,8,["friend"])))),128))])]))}});const N=(0,k.A)(M,[["__scopeId","data-v-29d52dbe"]]);var S=N;const O={class:"quests"},X={class:"container"},B={class:"quests-content"};var K=(0,e.pM)({__name:"FriendsSection",setup(t){(0,o.KR)();const a=(0,o.KR)(!0),s=(0,o.KR)(!1),i=t=>{const e=t.target;a.value=0===e.scrollLeft,s.value=e.scrollLeft+e.offsetWidth>=e.scrollWidth};(0,e.sV)((()=>{const t=document.querySelector(".nav");t&&t.addEventListener("scroll",i)}));(0,o.KR)(10),(0,o.KR)(!1),(0,o.KR)(!1);const r=(0,n.L)();(0,e.EW)((()=>r.promoTasks)),(0,o.KR)(0),(0,e.EW)((()=>r.categories));return(t,a)=>((0,e.uX)(),(0,e.CE)("section",O,[(0,e.Lk)("div",X,[(0,e.Lk)("div",B,[(0,e.Lk)("h2",null,(0,l.v_)(t.t("invite-friends")),1),(0,e.bF)(m),(0,e.bF)(S)])])]))}});const V=(0,k.A)(K,[["__scopeId","data-v-15ee99c8"]]);var P=V,Q=(0,e.pM)({__name:"FriendsView",setup(t){return(t,a)=>((0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.bF)(i.A),(0,e.Lk)("main",null,[(0,e.bF)(P)]),(0,e.bF)(r.A)],64))}});const W=Q;var Y=W},4462:function(t,a,s){t.exports=s.p+"img/green-coin.5547f652.svg"}}]);
//# sourceMappingURL=667.04e321b8.js.map